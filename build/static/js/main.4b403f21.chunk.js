(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{104:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(11),i=t.n(l),c=(t(87),t(20)),o=t.n(c),u=t(30),s=t(14),m=(t(89),t(90),t(12));t(42);function d(){return r.a.createElement("div",null,"Welcome to Home")}var p=t(131),h=t(135),f=t(136),g=t(142),b=t(138),v=t(144),E=t(23),y=t.n(E),x=y.a.initializeApp({apiKey:"AIzaSyBNNxfF9iveJTKICgukGUwxCsO8cmtLKQE",authDomain:"kumos-f4d9a.firebaseapp.com",databaseURL:"https://kumos-f4d9a.firebaseio.com",projectId:"kumos-f4d9a",storageBucket:"kumos-f4d9a.appspot.com",messagingSenderId:"1044651688607",appId:"1:1044651688607:web:639eb44d36faf9773e98aa",measurementId:"G-75LT4EWR1Z"}),j=y.a.apps.length?y.a.app():x;t(63);function O(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)(""),c=Object(s.a)(i,2),d=c[0],E=c[1],y=Object(n.useState)(""),x=Object(s.a)(y,2),O=x[0],w=x[1],C=Object(m.h)(),S=j.auth(),k=Object(m.g)();function I(){return(I=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),w(""),e.prev=2,e.next=5,S.signInWithEmailAndPassword(t,d);case 5:"/admin/login"===C.pathname?k.push("/admin"):k.push("/"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0.message),"The email address is already in use by another account."===e.t0.message&&w("email already in use.");case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"}},r.a.createElement(p.a,{style:{display:"flex",width:"fit-content"}},r.a.createElement(h.a,null,r.a.createElement(f.a,{color:"black",title:"Log In"}),r.a.createElement("form",{style:{display:"flex",flexDirection:"column"},onSubmit:function(e){return I.apply(this,arguments)}},r.a.createElement(g.a,{id:"email",value:t,onChange:function(e){return l(e.target.value)},variant:"outlined",label:"Email",style:{margin:"10px"},autoComplete:"off"}),r.a.createElement(g.a,{id:"password",type:"password",value:d,onChange:function(e){return E(e.target.value)},variant:"outlined",label:"Password",style:{margin:"10px"}}),O?r.a.createElement(v.a,{severity:"error",style:{margin:"10px",fontSize:"10px",height:"15px"}},O):r.a.createElement(v.a,{severity:"error",style:{display:"none",margin:"10px"}},"Failed"),r.a.createElement(b.a,{variant:"outlined",type:"submit",style:{margin:"10px"}},"Log In")))))}var w=t(145),C=t(139),S=t(143);function k(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)(""),c=Object(s.a)(i,2),d=c[0],E=c[1],x=Object(n.useState)(""),O=Object(s.a)(x,2),k=O[0],I=O[1],A=Object(n.useState)(""),T=Object(s.a)(A,2),P=T[0],U=T[1],L=Object(n.useState)(""),W=Object(s.a)(L,2),D=W[0],z=W[1],B=Object(n.useState)(""),F=Object(s.a)(B,2),G=F[0],J=F[1],K=Object(n.useState)(""),N=Object(s.a)(K,2),R=N[0],M=N[1],_=Object(n.useState)("company"),H=Object(s.a)(_,2),Q=H[0],Z=H[1],$=y.a.database(),q=y.a.firestore(),V=j.auth(),X=Object(m.g)();function Y(){return(Y=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),z("");try{$.ref("authCode").child(Q).once("value").then((function(e){e.forEach((function(e){if("technician"===Q)e.key===R&&e.val()===d&&(V.createUserWithEmailAndPassword(d,k),V.onAuthStateChanged((function(e){if(e){var a=q.collection("Technicians").doc(e.uid),n={name:t,email:d,phone:P};a.set(n),$.ref("authCode").child(Q).child(R).remove(),X.push("/")}})));else{var a=e.key;e.forEach(function(){var e=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.key!==R||n.val()!==d){e.next=4;break}return V.createUserWithEmailAndPassword(d,k),e.next=4,V.onAuthStateChanged((function(e){if(e){var n=q.collection("Companies").doc(a),r={name:t,email:d,phone:P};console.log(r),n.get().then((function(a){a.exists&&n.collection("User").doc(e.uid).set(r)})),$.ref("authCode").child(Q).child(a).child(R).remove(),X.push("/")}}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}}))}))}catch(n){console.log(n),"The email address is already in use by another account."==n.message&&z("email already in use.")}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"20px"}},r.a.createElement(p.a,{style:{display:"flex",width:"fit-content"}},r.a.createElement(h.a,null,r.a.createElement(f.a,{color:"black",title:"Sign Up"}),r.a.createElement("form",{style:{display:"flex",flexDirection:"column"},onSubmit:function(e){return Y.apply(this,arguments)}},r.a.createElement(g.a,{id:"name",value:t,onChange:function(e){return l(e.target.value)},variant:"outlined",label:"Name",style:{margin:"8px"}}),r.a.createElement(g.a,{id:"Phone",value:P,onChange:function(e){return U(e.target.value)},variant:"outlined",label:"Phone",style:{margin:"8px"}}),r.a.createElement(g.a,{id:"email",value:d,onChange:function(e){return E(e.target.value)},variant:"outlined",label:"Email",style:{margin:"8px"}}),r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement(w.a,{row:!0,"aria-label":"Type",value:Q,onChange:function(e){Z(e.target.value)}},r.a.createElement("label",{style:{margin:"20px 10px"}},"Type"),r.a.createElement(C.a,{value:"company",control:r.a.createElement(S.a,null),label:"Client",style:{margin:"8px"}}),r.a.createElement(C.a,{value:"technician",control:r.a.createElement(S.a,null),label:"Technician",style:{margin:"8px"}}))),r.a.createElement(g.a,{id:"authCode",value:R,onChange:function(e){return M(e.target.value)},variant:"outlined",label:"Auth Code",style:{margin:"10px"}}),r.a.createElement("div",{display:"flex"},r.a.createElement(g.a,{id:"password",type:"password",value:k,onChange:function(e){return I(e.target.value)},variant:"outlined",label:"Password",style:{margin:"10px"}}),r.a.createElement(g.a,{id:"cPassword",type:"password",value:G,onChange:function(e){return J(e.target.value)},variant:"outlined",label:"Confirm Password",style:{margin:"10px"}})),D?r.a.createElement(v.a,{severity:"error",style:{margin:"10px",fontSize:"10px",height:"15px"}},D):r.a.createElement(v.a,{severity:"error",style:{display:"none",margin:"10px"}},"Failed"),r.a.createElement(b.a,{variant:"outlined",type:"submit",style:{margin:"10px"}},"Sign Up")))))}var I=t(68),A=t.n(I);function T(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)(""),c=Object(s.a)(i,2),o=c[0],u=c[1],m=A.a.database().ref("authCode"),d={};return r.a.createElement("div",null,"welcome to admin ",t,r.a.createElement(p.a,null,r.a.createElement(f.a,{title:"Register a Technisian"}),r.a.createElement(g.a,{id:"email",type:"email",label:"Email",value:t,onChange:function(e){l(e.target.value)},variant:"outlined"}),r.a.createElement(g.a,{id:"authCode",type:"email",label:"Auth Code",variant:"outlined",disabled:!0,value:o}),r.a.createElement("button",{variant:"",onClick:function(){var e=Math.floor(1e5+9e5*Math.random());u(e),d[e]=t,m.child("technician").update(d)}},"Generate Auth Code")))}function P(){return r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(d,null)),r.a.createElement(m.b,{exact:!0,path:"/login"},r.a.createElement(O,null)),r.a.createElement(m.b,{exact:!0,path:"/sign_up"},r.a.createElement(k,null)),r.a.createElement(m.b,{exact:!0,path:"/admin"},r.a.createElement(T,null)),r.a.createElement(m.b,{exact:!0,path:"/admin/login"},r.a.createElement(O,null)))}var U=t(140),L=t(141),W=t(137),D=t(27);var z=function(){var e=Object(m.g)(),a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],i=t[1],c=Object(n.useState)(""),d=Object(s.a)(c,2),p=d[0],h=d[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),v=g[0],E=g[1],x=Object(m.h)();function j(){return(j=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.auth().onAuthStateChanged((function(e){e?i(!0):(i(!1),"/admin"===x.pathname?h(!0):h(!1),"/"===x.pathname?E(!0):E(!1))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(u.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.auth().signOut();case 2:i(!1),"/admin"===x.pathname?e.push("/admin/login"):e.push("/login");case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){j.apply(this,arguments)}()}),[]);var w=p?r.a.createElement(m.a,{to:"admin/login"}):r.a.createElement("div",null,r.a.createElement(b.a,{color:"inherit",component:D.b,to:"/login"},"Login"),r.a.createElement(b.a,{color:"inherit",component:D.b,to:"/sign_up"},"Sign Up"));return""!==l?r.a.createElement("div",null,r.a.createElement(U.a,{position:"static",style:{color:"black",backgroundColor:"white",alignItems:"flex-end"}},r.a.createElement(L.a,null,r.a.createElement(W.a,null),l?r.a.createElement("div",null,r.a.createElement(b.a,{color:"inherit",onClick:function(){return O.apply(this,arguments)}},"Log Out")):w)),v?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement(P,null)):r.a.createElement("div",null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(D.a,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,a,t){},82:function(e,a,t){e.exports=t(104)},87:function(e,a,t){},89:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},90:function(e,a,t){}},[[82,1,2]]]);
//# sourceMappingURL=main.4b403f21.chunk.js.map